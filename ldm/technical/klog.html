<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="description" content="LDM Logical Disk Manager Documentation">
    <link rel="stylesheet" type="text/css" href="../style/ldm.css">
    <link rel="icon" href="../style/ldmicon.png" type="image/png">
    <link rel="start" type="text/html" href="index.html" title="LDM Documentation">
    <link rel="next" href="index.html">
    <link rel="previous" href="vblk.html">
    <link rel="contents" href="../index.html">
    <title>KLOG - Technical - LDM Documentation</title>
  </head>

  <body>
    <table class="toolbar" summary="toolbar" cellspacing="0">
      <tr>
        <td class="toolbar"><div class="toolbar"><a class="toolbar" accesskey="1" href="../index.html">Home</a></div></td>
        <td class="toolbar"><div class="toolbar"><a class="toolbar" accesskey="2" href="../overview/index.html">Overview</a></div></td>
	<td class="toolbar"><a class="toolbar" accesskey="3" href="../technical/index.html">Technical</a></td>
      </tr>
    </table>

    <h1>KLOG - Technical</h1>

    <a class="prevnext" accesskey="," href="vblk.html">Previous</a>
    <a class="prevnext" accesskey="." href="index.html">Next</a> 

    <h2>Introduction</h2>

    <p>
    When changes are made to the database, the VMDB and KLOG structures
    record what is happening.  New VBLKs being added, and old VBLKs being
    removed are given a sequence number which is stored in the KLOG.
    </p>

    <h2>KLOG Structure</h2>

    <table summary="" cellspacing="0">
      <tr>
        <th class="numeric">Offset</th>
        <th class="numeric">Size</th>
        <th>Description</th>
      </tr>
      <tr>
	<td class="numeric">0x00</td>
	<td class="numeric">4</td>
	<td>"KLOG" Magic Number</td>
      </tr>
      <tr>
	<td class="numeric">0x04</td>
	<td class="numeric">4</td>
	<td>Zeros</td>
      </tr>
      <tr>
	<td class="numeric">0x08</td>
	<td class="numeric">4</td>
	<td>Something about extra records</td>
      </tr>
      <tr>
	<td class="numeric">0x0C</td>
	<td class="numeric">4</td>
	<td>Log Count (N)</td>
      </tr>
      <tr>
	<td class="numeric">0x10</td>
	<td class="numeric">4</td>
	<td>Number of KLOGs</td>
      </tr>
      <tr>
	<td class="numeric">0x14</td>
	<td class="numeric">4</td>
	<td>KLOG Index</td>
      </tr>
      <tr>
	<td class="numeric">0x18</td>
	<td class="numeric">1</td>
	<td>Don't know (always 0x03)</td>
      </tr>
      <tr>
	<td class="numeric">0x19</td>
	<td class="numeric">8</td>
	<td>Committed Id 1</td>
      </tr>
      <tr>
	<td class="numeric">0x21</td>
	<td class="numeric">8</td>
	<td>Pending Id 1</td>
      </tr>
      <tr>
	<td class="numeric">0x29</td>
	<td class="numeric">8</td>
	<td>Committed Id N-1</td>
      </tr>
      <tr>
	<td class="numeric">0x31</td>
	<td class="numeric">8</td>
	<td>Pending Id N-1</td>
      </tr>
      <tr>
	<td class="numeric">0x39</td>
	<td class="numeric">8</td>
	<td>Committed Id N-2</td>
      </tr>
      <tr>
	<td class="numeric">0x41</td>
	<td class="numeric">8</td>
	<td>Pending Id N-2</td>
      </tr>
      <tr>
	<td class="numeric">0x49</td>
	<td class="numeric">8</td>
	<td>...</td>
      </tr>
      <tr>
	<td class="numeric">16*N+0x09</td>
	<td class="numeric">8</td>
	<td>Committed Id 2</td>
      </tr>
      <tr>
	<td class="numeric">16*N+0x11</td>
	<td class="numeric">8</td>
	<td>Pending Id 2</td>
      </tr>
    </table>

    <br>
    <a class="contact" href="../home/license.html">Copyright &copy; 2002, </a>
    $Date: 2002/06/20 13:49:38 $
    <a class="contact" href="http://validator.w3.org/checklink?uri=referer">L</a>
    <a class="contact" href="http://validator.w3.org/check?uri=referer">H</a>
    <a class="contact" href="http://jigsaw.w3.org/css-validator/validator?uri=referer">C</a>
  </body>
</html>

