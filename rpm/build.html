<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Linux NTFS Project" />
    <meta name="keywords" content="Linux NTFS" />
    <link rel="stylesheet" href="style/home.css" type="text/css" />
    <link rel="icon" href="style/ntfsicon.png" type="image/png" />
    <title>NTFS RPMs</title>
  </head>
  <body>
    <table summary="" border="0" cellpadding="10" cellspacing="10" width="100%">
      <tbody><tr>
        <td colspan="2" class="block" valign="top">
          <table summary="" border="0" cellpadding="0" cellspacing="0" width="100%">
          <tbody><tr>
          <td align="left" width="90%"><h1>NTFS RPMs for Fedora &amp; RedHat</h1></td>
          <td width="50">
          <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
          <input name="cmd" value="_xclick" type="hidden" />
          <input name="business" value="paypal@flatcap.org" type="hidden" />
          <input name="item_name" value="Beer (in recognition of the NTFS RPM)" type="hidden" />
          <input name="image_url" value="http://flatcap.org/flatcap.png" type="hidden" />
          <input name="no_shipping" value="1" type="hidden" />
          <input name="return" value="index.html" type="hidden" />
          <input name="cancel_return" value="index.html" type="hidden" />
          <input name="no_note" value="0" type="hidden" />
          <input name="cn" value="Send flatcap a message:" type="hidden" />
          <input name="cs" value="0" type="hidden" />
          <input name="currency_code" value="GBP" type="hidden" />
          <input src="style/beer.png" name="submit" alt="Make a donation" type="image" />
          </form>
          </td>
          <td align="left">
          If&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;show&nbsp;your<br />
          appreciation,&nbsp;buy&nbsp;FlatCap&nbsp;a&nbsp;beer.
          </td>
          <td width="110">
          <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
          <input name="cmd" value="_xclick" type="hidden" />
          <input name="business" value="paypal@flatcap.org" type="hidden" />
          <input name="item_name" value="Beer (in recognition of the NTFS RPM)" type="hidden" />
          <input name="image_url" value="http://flatcap.org/flatcap.png" type="hidden" />
          <input name="no_shipping" value="1" type="hidden" />
          <input name="return" value="index.html" type="hidden" />
          <input name="cancel_return" value="index.html" type="hidden" />
          <input name="no_note" value="0" type="hidden" />
          <input name="cn" value="Send flatcap a message:" type="hidden" />
          <input name="cs" value="0" type="hidden" />
          <input name="currency_code" value="GBP" type="hidden" />
          <input src="style/donate.png" name="submit" alt="Make a donation" type="image" />
          </form>
          </td>
          </tr>
          </tbody></table>
        </td>
      </tr>
      <tr>
        <td class="block" valign="top" width="1%">
          <h3><a class="heading" href="../index.html">Linux-NTFS Project</a></h3>
          <br />
          <h3><a class="heading" href="index.html">Info</a></h3>
          <ul>
            <li><a class="quiet" href="index.html">News</a></li>
            <li><a class="quiet" href="about.html">About</a></li>
            <li><a class="quiet" href="instructions.html">Instructions</a></li>
            <li><a class="quiet" href="rel24.html">Release&nbsp;Notes&nbsp;2.4</a></li>
            <li><a class="quiet" href="rel26.html">Release&nbsp;Notes&nbsp;2.6</a></li>
            <li><a class="quiet" href="help.html">Help</a></li>
            <li><a class="quiet" href="build.html">Build&nbsp;Your&nbsp;Own</a></li>
            <li><a class="quiet" href="contact.html">Contact&nbsp;the&nbsp;Maintainer</a></li>
          </ul>

          <h3><a class="heading" href="downloads.html">Downloads</a></h3>
          <ul>
            <li><a class="quiet" href="fedora4.html">Fedora&nbsp;4</a></li>
            <li><a class="quiet" href="fedora3.html">Fedora&nbsp;3</a></li>
            <li><a class="quiet" href="fedora2.html">Fedora&nbsp;2</a></li>
            <li><a class="quiet" href="fedora1.html">Fedora&nbsp;1</a></li>
            <li><a class="quiet" href="rhel4.html">RHEL&nbsp;4</a></li>
            <li><a class="quiet" href="rhel3.html">RHEL&nbsp;3</a></li>
            <li><a class="quiet" href="redhat9.html">RedHat&nbsp;9</a></li>
            <li><a class="quiet" href="redhat8.html">RedHat&nbsp;8</a></li>
            <li><a class="quiet" href="redhat7.html">RedHat&nbsp;7</a></li>
            <li><a class="quiet" href="rpmsrc.html">Source&nbsp;Code</a></li>
            <li><a class="quiet" href="contrib.html">Contrib</a></li>
          </ul>

          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
        </td>
        <td class="block" valign="top">
          <h2>Building an NTFS RPM</h2>

          <h3>Introduction</h3>
          <p>
          However many NTFS RPMs I create, there will always be some people I
          won't have the time to help.  This page may help them to help
          themselves.
          </p>

          <p>
          <img src="style/red.png" alt="NB" width="16" height="16" />
          Note: These instructions should work for Fedora 2, Fedora 3 and RedHat
          Enterprise 4.
          </p>

          <h3>Who needs to do this?</h3>

          <p>
          The two most obvious groups are people using 64-bit hardware or people
          using customised RedHat, or Fedora, kernels.
          </p>

          <h3>How do I do it?</h3>

          <p>
          First you need to find out which kernel you're using.
          </p>

          <pre class="command">    <b>uname -r</b>

    2.6.8-1.521
          </pre>

          <p>
          If your answer ends with <q>smp</q> then you have a multi-processor
          kernel and you will need to adjust some of the commands below.
          </p>

          <p>
          Now, download the kernel source from the same place you downloaded
          your kernel.  If you have just installed, it will be on one of the
          install CDs.  The name will be something like:
          </p>

          <pre class="command">    kernel-2.6.8-1.521.src.rpm
          </pre>

          <p>
          <img src="style/red.png" alt="NB" width="16" height="16" />
          Note: This same source code is used to build all the different
          versions of the kernel and all the NTFS RPMs.
          </p>

          <p>
          <img src="style/red.png" alt="NB" width="16" height="16" />
          Note: If you have <b>RHEL4</b> or <b>FC4</b>, you will also need the
          kernel-devel rpm.  Simply put it in the build directory.
          </p>

          <p>
          Next, determine the architecture or your computer.
          </p>

          <p>
          <img src="style/red.png" alt="NB" width="16" height="16" />
          Note: You may need to replace <q>kernel</q> with <q>kernel-smp</q>.
          </p>

          <pre class="command">    <b>rpm -q --queryformat "%{ARCH}\n" kernel</b>

    i686
          </pre>

          <p>
          Now, download the build script:
          <a href="build-2.6">build-2.6</a> and the RPM spec file:
          <a href="kernel-module-ntfs.spec">kernel-module-ntfs.spec</a>.
          </p>

          <p>
          Finally, perform the build.  <q>./build-2.6 SPEC SOURCE ARCH</q>, e.g.
          </p>

          <pre class="command">    <b>chmod 700 build-2.6</b>

    <b>./build-2.6 kernel-module-ntfs.spec kernel-2.6.8-1.521.src.rpm i686</b>

    Using: kernel-module-ntfs.spec

    Building modules for kernel: 2.6.8-1.521
            Extracting source rpm...        done
            Preparing kernel source...      done

    Building: i686
            make distclean...               done
            make oldconfig...               done
            make prepare-all...             done
            make modules...                 done
            make rpm...                     done
    Done.

    Cleaning up... done
          </pre>

          <p>
          The build process will create an output directory whose name is based
          on the kernel version.  The directory will contain and NTFS kernel
          module, an NTFS RPM and a log of the build process.
          </p>

          <pre class="command">    <b>ls kernel-module-ntfs-2.6.8-1.521</b>

    kernel-module-ntfs-2.6.8-1.521-2.1.15-0.fc.1.2.i686.ko
    kernel-module-ntfs-2.6.8-1.521-2.1.15-0.fc.1.2.i686.rpm
    log-2.6.8-1.521
          </pre>

          <h3>Problems</h3>

          <p>
          If you have problems building your own RPM, then I'm sorry.  I don't
          have enough free time to help everyone.
          </p>

        </td>
      </tr>
    </tbody></table>
    <table summary="" border="0" cellspacing="0" width="100%">
      <tbody><tr>
        <td width="99%"><a class="contact" href="contact.html">Copyright &copy; 2002-2004 FlatCap (Richard Russon)</a></td>
      </tr>
    </tbody></table>

</body></html>
